openapi: 3.0.0
info:
  title: 가계부 서비스
  version: 1.0.0
  description: 사용자의 수입/지출을 관리하고 분석하는 서비스의 API 명세서.
servers:
  - url: 'http://localhost:3000'
    description: 개발 서버
tags:
  - name: Auth
    description: '사용자 인증 (회원가입, 로그인)'
  - name: Users
    description: 사용자 정보 (프로필)
  - name: Incomes
    description: 수입 관리
  - name: Expenses
    description: 지출 관리
  - name: Summary
    description: 요약 정보 API
  - name: TargetSpendings
    description: 목표 지출 관리
  - name: Reports
    description: 월별 보고서
  - name: Challenges
    description: 도전과제
  - name: ChallengeChecklists
    description: 사용자의 도전과제 참여 현황
  - name: UserLogs
    description: 사용자 활동 로그 (관리자 전용)
  - name: Admin
    description: 관리자 기능
paths:
  /api/auth/sign-up:
    post:
      tags:
        - Auth
      summary: 회원가입
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignUpRequest'
      responses:
        '201':
          description: 회원가입 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfile'
        '409':
          description: 이미 존재하는 이메일 또는 닉네임
  /api/auth/sign-in:
    post:
      tags:
        - Auth
      summary: 로그인
      description: '성공 시, 세션 ID가 담긴 쿠키 sssssssssid 설정.'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SigninRequest'
      responses:
        '200':
          description: 로그인 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: 로그인 성공
                  user:
                    $ref: '#/components/schemas/User'
        '401':
          description: 인증 정보 불일치
  /api/auth/sign-out:
    post:
      tags:
        - Auth
      summary: 로그아웃
      description: 서버의 세션을 지우고 클라이언트의 쿠키를 만료시킴.
      security:
        - cookieAuth: []
      responses:
        '200':
          description: 로그아웃 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: 성공적으로 로그아웃되었습니다.
        '401':
          description: 인증되지 않은 사용자 (로그인 상태가 아님)
  /api/users:
    get:
      tags:
        - Users
      summary: 모든 사용자 목록 조회 (관리자 전용)
      description: 관리자만 모든 사용자의 목록을 조회할 수 있습니다. 닉네임 또는 이메일로 검색할 수 있습니다.
      security:
        - cookieAuth: []
      parameters:
        - name: search
          in: query
          required: false
          description: 검색할 사용자의 이메일 또는 닉네임
          schema:
            type: string
        - name: searchBy
          in: query
          required: false
          description: 검색할 필드 (nickname 또는 email)
          schema:
            type: string
            enum:
              - nickname
              - email
      responses:
        '200':
          description: 사용자 목록 조회 성공
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
              example:
                - nickname: admin_user
                  contactEmail: admin@example.com
                  profileImageUrl: null
                  gender: male
                  birthday: '1990-01-01'
                  level: 10
                  exp: 1500
                  role: admin
                - nickname: test_user_1
                  contactEmail: user1@example.com
                  profileImageUrl: null
                  gender: female
                  birthday: '1995-05-10'
                  level: 5
                  exp: 750
                  role: user
        '403':
          description: 권한 없음
  /api/users/me:
    get:
      tags:
        - Users
      summary: 프로필 조회
      security:
        - cookieAuth: []
      responses:
        '200':
          description: 프로필 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserProfile'
              example:
                nickname: current_user
                contactEmail: current@example.com
                profileImageUrl: null
                gender: male
                birthday: '1992-12-25'
                level: 8
                exp: 1200
        '401':
          description: 인증 실패
    patch:
      tags:
        - Users
      summary: 프로필 수정
      security:
        - cookieAuth: []
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateMyProfileRequest'
      responses:
        '200':
          description: 프로필 수정 성공
        '401':
          description: 인증 실패
  '/api/users/{userId}':
    get:
      tags:
        - Users
      summary: 특정 사용자 정보 조회
      description: 본인 또는 관리자만 특정 사용자의 정보를 조회할 수 있습니다.
      security:
        - cookieAuth: []
      parameters:
        - $ref: '#/components/parameters/UserId'
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
              example:
                nickname: test_user_1
                contactEmail: user1@example.com
                profileImageUrl: null
                gender: female
                birthday: '1995-05-10'
                level: 5
                exp: 750
                role: user
        '403':
          description: 접근 권한 없음
        '404':
          description: 사용자를 찾을 수 없음
    patch:
      tags:
        - Users
      summary: 특정 사용자 정보 수정
      description: 본인 또는 관리자만 특정 사용자의 정보를 수정할 수 있습니다. role 필드는 관리자만 수정 가능합니다.
      security:
        - cookieAuth: []
      parameters:
        - $ref: '#/components/parameters/UserId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateUserByAdminRequest'
      responses:
        '200':
          description: 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/User'
              example:
                nickname: new_nickname
                contactEmail: user1@example.com
                profileImageUrl: null
                gender: female
                birthday: '1995-05-11'
                role: user
        '403':
          description: 접근 권한 없음
        '404':
          description: 사용자를 찾을 수 없음
    delete:
      tags:
        - Users
      summary: 특정 사용자 삭제
      description: 본인 또는 관리자만 사용자를 삭제할 수 있습니다.
      security:
        - cookieAuth: []
      parameters:
        - $ref: '#/components/parameters/UserId'
      responses:
        '200':
          description: 삭제 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: 성공적으로 삭제되었습니다.
        '403':
          description: 접근 권한 없음
        '404':
          description: 사용자를 찾을 수 없음
  /api/incomes:
    get:
      tags:
        - Incomes
      summary: 내 수입 내역 조회
      security:
        - cookieAuth: []
      parameters:
        - $ref: '#/components/parameters/Year'
        - $ref: '#/components/parameters/Month'
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Income'
    post:
      tags:
        - Incomes
      summary: 수입 내역 추가
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IncomeRequest'
      responses:
        '201':
          description: 수입 내역 추가 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Income'
  '/api/incomes/{incomeId}':
    patch:
      tags:
        - Incomes
      summary: 수입 내역 수정
      security:
        - cookieAuth: []
      parameters:
        - $ref: '#/components/parameters/IncomeId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/IncomeRequest'
      responses:
        '200':
          description: 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Income'
    delete:
      tags:
        - Incomes
      summary: 수입 내역 삭제
      security:
        - cookieAuth: []
      parameters:
        - $ref: '#/components/parameters/IncomeId'
      responses:
        '204':
          description: 삭제 성공
  /api/expenses:
    get:
      tags:
        - Expenses
      summary: 지출 내역 조회
      security:
        - cookieAuth: []
      parameters:
        - $ref: '#/components/parameters/Year'
        - $ref: '#/components/parameters/Month'
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Expense'
    post:
      tags:
        - Expenses
      summary: 지출 내역 추가
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExpenseRequest'
      responses:
        '201':
          description: 지출 내역 추가 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Expense'
  '/api/expenses/{expenseId}':
    patch:
      tags:
        - Expenses
      summary: 지출 내역 수정
      security:
        - cookieAuth: []
      parameters:
        - $ref: '#/components/parameters/ExpenseId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ExpenseRequest'
      responses:
        '200':
          description: 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Expense'
    delete:
      tags:
        - Expenses
      summary: 지출 내역 삭제
      security:
        - cookieAuth: []
      parameters:
        - $ref: '#/components/parameters/ExpenseId'
      responses:
        '204':
          description: 삭제 성공
  /api/target-spendings:
    get:
      tags:
        - TargetSpendings
      summary: 월별 목표 지출 조회
      security:
        - cookieAuth: []
      parameters:
        - $ref: '#/components/parameters/Year'
        - $ref: '#/components/parameters/Month'
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/TargetSpending'
    post:
      tags:
        - TargetSpendings
      summary: 월별 목표 지출 설정
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TargetSpendingRequest'
      responses:
        '201':
          description: 목표 설정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TargetSpending'
  '/api/target-spendings/{targetSpendingId}':
    patch:
      tags:
        - TargetSpendings
      summary: 내 월별 목표 지출 수정
      security:
        - cookieAuth: []
      parameters:
        - $ref: '#/components/parameters/TargetSpendingId'
      requestBody:
        description: 수정할 목표 지출 정보.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TargetSpendingRequest'
      responses:
        '200':
          description: 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TargetSpending'
    delete:
      tags:
        - TargetSpendings
      summary: 월별 목표 지출 삭제
      security:
        - cookieAuth: []
      parameters:
        - $ref: '#/components/parameters/TargetSpendingId'
      responses:
        '204':
          description: 삭제 성공
  /api/reports/monthly:
    get:
      tags:
        - Reports
      summary: 월별 분석 보고서 조회
      security:
        - cookieAuth: []
      parameters:
        - $ref: '#/components/parameters/Year'
        - $ref: '#/components/parameters/Month'
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MonthlyReportResponse'
  /api/challenges:
    get:
      tags:
        - Challenges
      summary: 전체 도전과제 목록 조회
      security:
        - cookieAuth: []
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/Limit'
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetChallengesResponse'
              example:
                challenges:
                  - challengeId: 1
                    title: 일주일 지출 10회 미만
                    description: 일주일 동안 지출 횟수를 10회 미만으로 유지하여 절약 습관을 길러보세요.
                    rewardXp: 100
                    challengeStartDate: '2025-11-10'
                    challengeExpireDate: '2025-11-17'
                    limitDay: 7
                  - challengeId: 2
                    title: 한달 수입 50만원 이상 달성
                    description: '부수입, 월급 외 추가 수입으로 50만원 이상을 벌어보세요.'
                    rewardXp: 200
                    challengeStartDate: '2025-11-01'
                    challengeExpireDate: '2025-11-30'
                    limitDay: 30
                totalItems: 2
    post:
      tags:
        - Challenges
      summary: 새로운 도전과제 생성 (관리자 전용)
      description: 관리자만 새로운 도전과제를 생성할 수 있습니다.
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateChallengeRequest'
      responses:
        '201':
          description: 생성 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Challenge'
        '403':
          description: 권한 없음
  '/api/challenges/{challengeId}':
    get:
      tags:
        - Challenges
      summary: 특정 도전과제 상세 조회
      security:
        - cookieAuth: []
      parameters:
        - $ref: '#/components/parameters/ChallengeId'
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Challenge'
              example:
                challengeId: 1
                title: 일주일 지출 10회 미만
                description: 일주일 동안 지출 횟수를 10회 미만으로 유지하여 절약 습관을 길러보세요.
                rewardXp: 100
                challengeStartDate: '2025-11-10'
                challengeExpireDate: '2025-11-17'
                limitDay: 7
        '404':
          description: 챌린지를 찾을 수 없음
    patch:
      tags:
        - Challenges
      summary: 특정 도전과제 수정 (관리자 전용)
      description: 관리자만 도전과제 정보를 수정할 수 있습니다.
      security:
        - cookieAuth: []
      parameters:
        - $ref: '#/components/parameters/ChallengeId'
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateChallengeRequest'
      responses:
        '200':
          description: 수정 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Challenge'
              example:
                challengeId: 1
                title: 일주일 지출 5회 미만으로 변경
                description: 일주일 동안 지출 횟수를 5회 미만으로 유지하여 절약 습관을 길러보세요.
                rewardXp: 150
                challengeStartDate: '2025-11-10'
                challengeExpireDate: '2025-11-17'
                limitDay: 7
  /api/challenge-checklists:
    get:
      tags:
        - ChallengeChecklists
      summary: 챌린지 참여 목록 조회
      description: 사용자가 참여하고 있는 챌린지 목록을 조회합니다. 관리자는 userId 쿼리를 통해 특정 사용자의 목록을 조회할 수 있습니다.
      security:
        - cookieAuth: []
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/Limit'
        - name: userId
          in: query
          description: 조회할 사용자의 ID (관리자 전용)
          schema:
            type: integer
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetChallengeChecklistsResponse'
              example:
                checklists:
                  - challengeChecklistId: 1
                    userId: 1
                    challengeId: 1
                    status: PENDING
                    userStartDate: '2025-11-10T00:00:00Z'
                    userExpireDate: '2025-11-17T23:59:59Z'
                    completeDate: null
                    challenge:
                      challengeId: 1
                      title: 일주일 지출 10회 미만
                      description: 일주일 동안 지출 횟수를 10회 미만으로 유지하여 절약 습관을 길러보세요.
                      rewardXp: 100
                      challengeStartDate: '2025-11-10'
                      challengeExpireDate: '2025-11-17'
                      limitDay: 7
                totalItems: 1
    post:
      tags:
        - ChallengeChecklists
      summary: 챌린지 참여 (체크리스트 생성)
      description: 사용자가 특정 챌린지에 참여를 시작합니다.
      security:
        - cookieAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateChallengeChecklistRequest'
      responses:
        '201':
          description: 챌린지 참여 시작 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChallengeChecklist'
              example:
                challengeChecklistId: 2
                userId: 1
                challengeId: 2
                status: PENDING
                userStartDate: '2025-11-07T10:00:00Z'
                userExpireDate: '2025-11-14T23:59:59Z'
                completeDate: null
                challenge:
                  challengeId: 2
                  title: 한달 수입 50만원 이상 달성
                  description: '부수입, 월급 외 추가 수입으로 50만원 이상을 벌어보세요.'
                  rewardXp: 200
                  challengeStartDate: '2025-11-01'
                  challengeExpireDate: '2025-11-30'
                  limitDay: 30
  '/api/challenge-checklists/{challengeChecklistId}':
    get:
      tags:
        - ChallengeChecklists
      summary: 챌린지 참여 내역 상세 조회
      description: 특정 챌린지 참여 내역(체크리스트)의 상세 정보를 조회합니다.
      security:
        - cookieAuth: []
      parameters:
        - name: challengeChecklistId
          in: path
          required: true
          description: 조회할 챌린지 체크리스트의 ID
          schema:
            type: integer
      responses:
        '200':
          description: 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ChallengeChecklist'
              example:
                challengeChecklistId: 1
                userId: 1
                challengeId: 1
                status: PENDING
                userStartDate: '2025-11-10T00:00:00Z'
                userExpireDate: '2025-11-17T23:59:59Z'
                completeDate: null
                challenge:
                  challengeId: 1
                  title: 일주일 지출 10회 미만
                  description: 일주일 동안 지출 횟수를 10회 미만으로 유지하여 절약 습관을 길러보세요.
                  rewardXp: 100
                  challengeStartDate: '2025-11-10'
                  challengeExpireDate: '2025-11-17'
                  limitDay: 7
        '403':
          description: 접근 권한 없음
        '404':
          description: 리소스를 찾을 수 없음
  /api/user-logs:
    get:
      tags:
        - UserLogs
      summary: 사용자 활동 로그 조회 (관리자 전용)
      description: 관리자만 사용자의 활동 로그를 조회할 수 있습니다. 여러 쿼리 파라미터를 통해 결과를 필터링할 수 있습니다.
      security:
        - cookieAuth: []
      parameters:
        - $ref: '#/components/parameters/Page'
        - $ref: '#/components/parameters/Limit'
        - name: userId
          in: query
          required: false
          description: 로그를 필터링할 사용자 ID
          schema:
            type: integer
        - name: traceId
          in: query
          required: false
          description: 특정 요청의 전체 흐름을 추적하기 위한 ID
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: 로그 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetLogsResponse'
              example:
                count: 1
                rows:
                  - logId: 101
                    userId: 1
                    actionType: USER_LOGIN_SUCCESS
                    details:
                      message: 사용자(1)가 성공적으로 로그인했습니다.
                    traceId: a1b2c3d4-e5f6-7890-1234-567890abcdef
                    createdAt: '2025-11-07T10:00:00Z'
                    User:
                      nickname: test_user_1
                      email: user1@example.com
                      role: user
        '403':
          description: 권한 없음
  /api/summary/monthly:
    get:
      tags:
        - Summary
      summary: 월별 수입/지출 요약 조회
      description: '메뉴의 ''이달의 가계''에 필요한 총수입, 총지출 합계를 조회.'
      security:
        - cookieAuth: []
      parameters:
        - $ref: '#/components/parameters/Year'
        - $ref: '#/components/parameters/Month'
      responses:
        '200':
          description: 요약 정보 조회 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MonthlySummaryResponse'
components:
  schemas:
    SignUpRequest:
      type: object
      required:
        - email
        - password
        - nickname
        - gender
      properties:
        email:
          type: string
          format: email
          example: user@example.com
        password:
          type: string
          format: password
          example: password123!
        nickname:
          type: string
          example: 가계부사용자1
        gender:
          type: string
          enum:
            - male
            - female
          example: male
        birthday:
          type: string
          format: date
          example: '2000-07-19'
    SigninRequest:
      type: object
      required:
        - email
        - password
      properties:
        email:
          type: string
          format: email
        password:
          type: string
          format: password
    UpdateMyProfileRequest:
      type: object
      properties:
        nickname:
          type: string
          example: 새로운닉네임
        gender:
          type: string
          enum:
            - male
            - female
        birthday:
          type: string
          format: date
        newPassword:
          type: string
          format: password
          description: 새로운 비밀번호. 변경을 원할 때만 보냄.
          example: newPassword123!
        newPasswordConfirm:
          type: string
          format: password
          description: 새로운 비밀번호 확인. newPassword와 함께 보내야 함.
          example: newPassword123!
    UpdateUserByAdminRequest:
      type: object
      properties:
        nickname:
          type: string
        gender:
          type: string
          enum:
            - male
            - female
        birthday:
          type: string
          format: date
        status:
          type: string
          enum:
            - active
            - inactive
            - blocked
        role:
          type: string
          enum:
            - user
            - admin
        newPassword:
          type: string
          format: password
          description: 새로운 비밀번호. 변경을 원할 때만 보냄.
          example: newPassword123!
        newPasswordConfirm:
          type: string
          format: password
          description: 새로운 비밀번호 확인. newPassword와 함께 보내야 함.
          example: newPassword123!
    IncomeRequest:
      type: object
      required:
        - date
        - amount
        - category
      properties:
        date:
          type: string
          format: date
          example: '2025-08-10'
        amount:
          type: integer
          example: 3000000
        category:
          type: string
          enum:
            - SALARY
            - SIDE_INCOME
            - ALLOWANCE
          example: SALARY
        status:
          type: string
          enum:
            - APPROVED
            - SCHEDULED
            - REJECTED
          example: APPROVED
        description:
          type: string
          example: 8월 급여
    ExpenseRequest:
      type: object
      required:
        - date
        - amount
        - category
      properties:
        date:
          type: string
          format: date
          example: '2025-08-11'
        amount:
          type: integer
          example: 600000
        category:
          type: string
          enum:
            - LIVING_EXPENSES
            - FIXED_EXPENSES
            - LEISURE
          example: LEISURE
        paymentMethod:
          type: string
          enum:
            - BANK_TRANSFER
            - CASH
            - CREDIT_CARD
            - DEBIT_CARD
          example: CREDIT_CARD
        status:
          type: string
          enum:
            - APPROVED
            - SCHEDULED
            - REJECTED
          example: APPROVED
        description:
          type: string
          example: 티켓 예매
    TargetSpendingRequest:
      type: object
      required:
        - year
        - month
        - category
        - amount
      properties:
        year:
          type: integer
          example: 2025
        month:
          type: integer
          example: 8
        category:
          type: string
          enum:
            - LIVING_EXPENSES
            - FIXED_EXPENSES
            - LEISURE
          example: LIVING_EXPENSES
        amount:
          type: integer
          example: 500000
        description:
          type: string
          example: 이번 달 생활비 50만원 이하
    CreateChallengeRequest:
      type: object
      required:
        - title
        - rewardXp
        - challengeType
        - targetValue
      properties:
        title:
          type: string
          example: 일주일 지출 10회 미만
        description:
          type: string
          example: 일주일 동안 지출 횟수를 10회 미만으로 유지하여 절약 습관을 길러보세요.
        rewardXp:
          type: integer
          example: 100
        challengeStartDate:
          type: string
          format: date
          example: '2025-11-10'
        challengeExpireDate:
          type: string
          format: date
          example: '2025-11-17'
        limitDay:
          type: integer
          example: 7
        challengeType:
          type: string
          enum:
            - EXPENSE_COUNT_MORE
            - EXPENSE_COUNT_LESS
            - INCOME_COUNT_MORE
            - INCOME_COUNT_LESS
            - EXPENSE_TOTAL_AMOUNT_LESS
            - EXPENSE_TOTAL_AMOUNT_MORE
            - INCOME_TOTAL_AMOUNT_LESS
            - INCOME_TOTAL_AMOUNT_MORE
          example: EXPENSE_COUNT_LESS
        targetValue:
          type: integer
          example: 10
    UpdateChallengeRequest:
      type: object
      properties:
        title:
          type: string
          example: 일주일 지출 5회 미만
        description:
          type: string
          example: 절약 챌린지 난이도 상승!
        rewardXp:
          type: integer
          example: 150
        challengeStartDate:
          type: string
          format: date
          example: '2025-12-01'
        challengeExpireDate:
          type: string
          format: date
          example: '2025-12-08'
        limitDay:
          type: integer
          example: 7
        challengeType:
          type: string
          enum:
            - EXPENSE_COUNT_MORE
            - EXPENSE_COUNT_LESS
            - INCOME_COUNT_MORE
            - INCOME_COUNT_LESS
            - EXPENSE_TOTAL_AMOUNT_LESS
            - EXPENSE_TOTAL_AMOUNT_MORE
            - INCOME_TOTAL_AMOUNT_LESS
            - INCOME_TOTAL_AMOUNT_MORE
          example: EXPENSE_COUNT_LESS
        targetValue:
          type: integer
          example: 5
    ChallengeChecklist:
      type: object
      properties:
        challengeChecklistId:
          type: integer
        userId:
          type: integer
        challengeId:
          type: integer
        status:
          type: string
          enum:
            - PENDING
            - COMPLETED
            - FAILED
        userStartDate:
          type: string
          format: date-time
        userExpireDate:
          type: string
          format: date-time
        completeDate:
          type: string
          format: date-time
          nullable: true
        challenge:
          $ref: '#/components/schemas/Challenge'
    CreateChallengeChecklistRequest:
      type: object
      required:
        - challengeId
      properties:
        challengeId:
          type: integer
          description: 참여할 챌린지의 ID
    GetChallengeChecklistsResponse:
      type: object
      properties:
        checklists:
          type: array
          items:
            $ref: '#/components/schemas/ChallengeChecklist'
        totalItems:
          type: integer
    Challenge:
      type: object
      properties:
        challengeId:
          type: integer
        title:
          type: string
        description:
          type: string
        rewardXp:
          type: integer
    UserChallengeStatus:
      type: object
      properties:
        challengeId:
          type: integer
        title:
          type: string
        description:
          type: string
        rewardXp:
          type: integer
        status:
          type: string
          enum:
            - PENDING
            - COMPLETED
        achievedAt:
          type: string
          format: date
    User:
      type: object
      properties:
        userId:
          type: integer
        nickname:
          type: string
        contactEmail:
          type: string
          format: email
        profileImageUrl:
          type: string
          format: uri
        gender:
          type: string
          enum:
            - male
            - female
        birthday:
          type: string
          format: date
        status:
          type: string
          enum:
            - active
            - inactive
            - blocked
        role:
          type: string
          enum:
            - user
            - admin
        level:
          type: integer
        exp:
          type: integer
    UserLog:
      type: object
      properties:
        logId:
          type: integer
        userId:
          type: integer
        actionType:
          type: string
        details:
          type: object
        traceId:
          type: string
          format: uuid
        createdAt:
          type: string
          format: date-time
        User:
          type: object
          properties:
            nickname:
              type: string
            email:
              type: string
            role:
              type: string
    GetLogsResponse:
      type: object
      properties:
        count:
          type: integer
        rows:
          type: array
          items:
            $ref: '#/components/schemas/UserLog'
    GetChallengesResponse:
      type: object
      properties:
        challenges:
          type: array
          items:
            $ref: '#/components/schemas/Challenge'
        totalItems:
          type: integer
    UserProfile:
      type: object
      properties:
        nickname:
          type: string
        contactEmail:
          type: string
          format: email
        profileImageUrl:
          type:
            - string
            - 'null'
          nullable: true
        gender:
          type: string
          enum:
            - male
            - female
        birthday:
          type: string
          format: date
        level:
          type: integer
        exp:
          type: integer
    Income:
      type: object
      properties:
        incomeId:
          type: integer
        userId:
          type: integer
        financialYearId:
          type: integer
        date:
          type: string
          format: date
        amount:
          type: integer
        category:
          type: string
          enum:
            - SALARY
            - SIDE_INCOME
            - ALLOWANCE
        status:
          type: string
          enum:
            - APPROVED
            - SCHEDULED
            - REJECTED
        description:
          type: string
    Expense:
      type: object
      properties:
        expenseId:
          type: integer
        userId:
          type: integer
        financialYearId:
          type: integer
        date:
          type: string
          format: date
        amount:
          type: integer
        category:
          type: string
          enum:
            - LIVING_EXPENSES
            - FIXED_EXPENSES
            - LEISURE
        paymentMethod:
          type: string
          enum:
            - BANK_TRANSFER
            - CASH
            - CREDIT_CARD
            - DEBIT_CARD
        status:
          type: string
          enum:
            - APPROVED
            - SCHEDULED
            - REJECTED
        description:
          type: string
    TargetSpending:
      type: object
      properties:
        targetSpendingId:
          type: integer
        userId:
          type: integer
        financialYearId:
          type: integer
        category:
          type: string
          enum:
            - LIVING_EXPENSES
            - FIXED_EXPENSES
            - LEISURE
        amount:
          type: integer
        description:
          type: string
    MonthlySummaryResponse:
      type: object
      properties:
        totalIncome:
          type: integer
          example: 3066000
        totalExpense:
          type: integer
          example: 2102400
        totalresult:
          type: integer
          description: 해당 월의 순수입 (총수입 - 총지출)
          example: 963600
    CategorySummary:
      type: object
      properties:
        category:
          type: string
        totalAmount:
          type: integer
    PaymentMethodSummary:
      type: object
      properties:
        paymentMethod:
          type: string
        totalAmount:
          type: integer
    WeeklySummary:
      type: object
      properties:
        weekNumber:
          type: integer
          description: '해당 월의 주차 (1주차, 2주차 등)'
          example: 1
        amount:
          type: integer
          description: 해당 주차의 총 금액
          example: 750000
    MonthlyReportResponse:
      type: object
      properties:
        summary:
          type: object
          properties:
            totalIncome:
              type: integer
            totalExpense:
              type: integer
            incomeChangePercentage:
              type: number
              format: float
              description: 전월 대비 수입 증감률
            expenseChangePercentage:
              type: number
              format: float
              description: 전월 대비 지출 증감률
        expenseReport:
          type: object
          properties:
            byCategory:
              type: array
              items:
                $ref: '#/components/schemas/CategorySummary'
            byPaymentMethod:
              type: array
              items:
                $ref: '#/components/schemas/PaymentMethodSummary'
            topExpenses:
              type: array
              items:
                $ref: '#/components/schemas/Expense'
        incomeReport:
          type: object
          properties:
            byCategory:
              type: array
              items:
                $ref: '#/components/schemas/CategorySummary'
            topIncomes:
              type: array
              items:
                $ref: '#/components/schemas/Income'
        weeklyIncomeTrend:
          type: array
          description: 주차별 수입 금액 트렌드 (선 그래프용)
          items:
            $ref: '#/components/schemas/WeeklySummary'
        weeklyExpenseTrend:
          type: array
          description: 주차별 지출 금액 트렌드 (선 그래프용)
          items:
            $ref: '#/components/schemas/WeeklySummary'
  parameters:
    Page:
      name: page
      in: query
      required: false
      description: 페이지 번호
      schema:
        type: integer
        default: 1
    Limit:
      name: limit
      in: query
      required: false
      description: 페이지 당 항목 수
      schema:
        type: integer
        default: 10
    Year:
      name: year
      in: query
      required: true
      schema:
        type: integer
      example: 2025
    Month:
      name: month
      in: query
      required: true
      schema:
        type: integer
      example: 8
    Search:
      name: search
      in: query
      required: false
      schema:
        type: string
    AdminUserSearch:
      name: search
      in: query
      required: false
      description: 검색할 사용자의 이메일 또는 닉네임
      schema:
        type: string
        example: test@example.com
    IncomeId:
      name: incomeId
      in: path
      required: true
      schema:
        type: integer
    ExpenseId:
      name: expenseId
      in: path
      required: true
      schema:
        type: integer
    UserId:
      name: userId
      in: path
      required: true
      schema:
        type: integer
    TargetSpendingId:
      name: targetSpendingId
      in: path
      required: true
      schema:
        type: integer
    ChallengeId:
      name: challengeId
      in: path
      required: true
      schema:
        type: integer
    Role:
      name: role
      in: query
      required: false
      description: 필터링할 사용자의 역할
      schema:
        type: string
        enum:
          - user
          - admin
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: ssssssssid
